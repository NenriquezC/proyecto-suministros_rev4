

<div class="card mb-3">
<div class="card-header">
    <h2 class="card-title">Datos de la compra</h2>
</div>
<div class="card-body">
    {# Boton para crear nuevo Proveedor * #}
    <div class="text-center mb-2">
    <!--<div class="mt-1">-->
        <a 
            href="{% url 'inventario:proveedor_crear' %}?next={% url 'compras:agregar_compra' %}"
            class="btn btn-sm btn-outline-primary"
            target="_blank" rel="noopener"
            >+ Nuevo proveedor</a>
            <div>
            <small class="text-muted ms- d-inline-block">Si proveedor no existe ingrese aqu√≠.</small>
            </div>
        </div>



    {% if form.non_field_errors %}
    <div class="alert alert-danger">{{ form.non_field_errors }}</div>
    {% endif %}

    <div class="form-rows-2col">
    {# ----------------------------------------------- Proveedor -----------------------------------------------------------  #}
        {% if form.proveedor %}
            <label for="{{ form.proveedor.id_for_label }}" class="form-label-left">
                Proveedor <span class="req"></span>
            </label>
    <div class="form-field">
        {{ form.proveedor }}
        {% for error in form.proveedor.errors %}
            <div class="invalid-feedback d-block">{{ error }}</div>
        {% endfor %}
            </div>
    {% endif %}

    {# --------------------------------------------- Fecha *-------------------------------------------------------------- #}
    {% if form.fecha %}
  <label for="{{ form.fecha.id_for_label }}" class="form-label-left">
    Fecha <span class="req"></span>
  </label>
  <div class="form-field">
    {% if readonly %}
      <!-- Mostrar como input deshabilitado para mantener la misma visual -->
      <input type="date" value="{{ compra.fecha|date:'Y-m-d' }}" disabled>
    {% else %}
      {{ form.fecha }}
      {% for error in form.fecha.errors %}
        <div class="invalid-feedback d-block">{{ error }}</div>
      {% endfor %}
    {% endif %}
  </div>
{% endif %}

    {# -------------------------------------- Descuento porcentaje *  --------------------------------------------------------#}
    {% if form.descuento_porcentaje %}
        <label for="{{ form.descuento_porcentaje.id_for_label }}" class="form-label-left">
        Descuento (%)<span class="req"></span>
        </label>
        <div class="form-field">
        {{ form.descuento_porcentaje }}
        {% for error in form.descuento_porcentaje.errors %}
            <div class="invalid-feedback d-block">{{ error }}</div>
        {% endfor %}
        </div>
    {% endif %}

    {# Descuento total #}
    <!--

    {% if form.descuento_total %}
        <label for="{{ form.descuento_total.id_for_label }}" class="form-label-left">Descuento total</label>
        <div class="form-field">
        {{ form.descuento_total }}
        {% for error in form.descuento_total.errors %}
            <div class="invalid-feedback d-block">{{ error }}</div>
        {% endfor %}
        </div>
    {% endif %}
        -->

    {# ------------------------------------------ Impuesto total  ----------------------------------------------------------------#}
    {% if form.impuesto_total %}
        <label for="{{ form.impuesto_total.id_for_label }}" class="form-label-left">Impuesto (IVA)</label>
        <div class="form-field">
        {{ form.impuesto_total }}
        {% for error in form.impuesto_total.errors %}
            <div class="invalid-feedback d-block">{{ error }}</div>
        {% endfor %}
        </div>
    {% endif %}
    </div>
</div>
</div>