{# inputs: formulario_venta #}
<div class="grid" style="display:grid; grid-template-columns: repeat(12, 1fr); gap:12px;">

  <!-- Cliente -->
  <div class="col-6" style="grid-column: span 6;">
    <label for="{{ formulario_venta.cliente.id_for_label }}">Cliente</label>
    {{ formulario_venta.cliente.errors }}
    {{ formulario_venta.cliente }}
  </div>

  
<!-- Fecha -->
<div class="col-3" style="grid-column: span 3;">
  {% with f=formulario_venta|default:form %}
    {% if f.fecha %}
      <label for="{{ f.fecha.id_for_label }}">Fecha <span class="req">*</span></label>
      <div class="form-field">
        {# Tomamos el valor desde la instancia del form; si no hay, usamos 'venta' si existe #}
        {% with val=f.instance.fecha|default:venta.fecha %}
          {% if readonly %}
            <input type="date" value="{{ val|date:'Y-m-d' }}" disabled>
          {% else %}
            {{ f.fecha }}
            {% for error in f.fecha.errors %}
              <div class="invalid-feedback d-block">{{ error }}</div>
            {% endfor %}
          {% endif %}
        {% endwith %}
      </div>
    {% endif %}
  {% endwith %}
</div>


{# Impuesto (%) — en readonly mostrar como porcentaje, no como dinero #}
<div class="col-3" style="grid-column: span 3;">
  {% with f=formulario_venta|default:form %}
    {% if f.impuesto %}
      <label for="{{ f.impuesto.id_for_label }}">Impuesto (%)</label>
      <div class="form-field">
        {% if readonly %}
          <input type="text"
                value="{{ impuesto_porcentaje|default:venta.impuesto_porcentaje|floatformat:2 }} %"
                class="form-control" disabled>
        {% else %}
          {{ f.impuesto }}
          {% for error in f.impuesto.errors %}
            <div class="invalid-feedback d-block">{{ error }}</div>
          {% endfor %}
        {% endif %}
      </div>
    {% endif %}
  {% endwith %}
</div>


  {# Totales se calculan; no se editan aquí. Si en tu form vienen como read-only, puedes mostrarlos: #}
  {# 
  <div class="col-3" style="grid-column: span 3;">
    <label>Subtotal</label>
    {{ formulario_venta.subtotal }}
  </div>
  <div class="col-3" style="grid-column: span 3;">
    <label>Impuesto</label>
    {{ formulario_venta.impuesto }}
  </div>
  <div class="col-3" style="grid-column: span 3;">
    <label>Descuento total</label>
    {{ formulario_venta.descuento_total }}
  </div>
  <div class="col-3" style="grid-column: span 3;">
    <label>Total</label>
    {{ formulario_venta.total }}
  </div>
  #}

</div>